
; banjo sound driver
; Joe Kennedy 2025

; mod 12 in upper nibble
; div 12 in lower nibble
music_divmod12_opm:	
.db 0x00, 0x00, 0x01, 0x02, 0x04, 0x05, 0x06, 0x08, 0x09, 0x0a, 0x0c, 0x0d, 0x0e, 0x10, 0x11, 0x12
.db 0x14, 0x15, 0x16, 0x18, 0x19, 0x1a, 0x1c, 0x1d, 0x1e, 0x20, 0x21, 0x22, 0x24, 0x25, 0x26, 0x28
.db 0x29, 0x2a, 0x2c, 0x2d, 0x2e, 0x30, 0x31, 0x32, 0x34, 0x35, 0x36, 0x38, 0x39, 0x3a, 0x3c, 0x3d
.db 0x3e, 0x40, 0x41, 0x42, 0x44, 0x45, 0x46, 0x48, 0x49, 0x4a, 0x4c, 0x4d, 0x4e, 0x50, 0x51, 0x52
.db 0x54, 0x55, 0x56, 0x58, 0x59, 0x5a, 0x5c, 0x5d, 0x5e, 0x60, 0x61, 0x62, 0x64, 0x65, 0x66, 0x68
.db 0x69, 0x6a, 0x6c, 0x6d, 0x6e, 0x70, 0x71, 0x72, 0x74, 0x75, 0x76, 0x78, 0x79, 0x7a, 0x7c, 0x7d
.db 0x7e, 0x80, 0x81, 0x82, 0x84, 0x85, 0x86, 0x88, 0x89, 0x8a, 0x8c, 0x8d, 0x8e, 0x90, 0x91, 0x92
.db 0x94, 0x95, 0x96, 0x98, 0x99, 0x9a, 0x9c, 0x9d, 0x9e, 0xa0, 0xa1, 0xa2, 0xa4, 0xa5, 0xa6, 0xa8

;// key codes have weird breaks and octaves start at c# = 0
;let note_mappings = [14, 0, 1, 2, 4, 5, 6, 8, 9, 10, 12, 13];
;out = "";
;for (i = 0; i < 128; i += 16) {
;	out += ".db ";
;	for (j = 0; j < 16; j++) {
;		// -1 as key code octaves start at c#
;		let octave = Math.floor((i + j - 1)/12)
;		let note = note_mappings[((i + j) % 12)]
;		if (octave < 0)
;		{
;			octave = 0;
;			note = 0;
;		}
;		let val = (octave << 4) | note;
;		out += ("0x" + val.toString(16).padStart(2, "0")) + (j != 15 ? ", " : "")
;	}
;	out += "\n";
;}
;console.log(out)
